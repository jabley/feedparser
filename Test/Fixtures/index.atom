<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"
  xmlns:thr="http://purl.org/syndication/thread/1.0">
  <link rel="self" href="http://intertwingly.net/blog/index.atom"/>
  <id>http://intertwingly.net/blog/index.atom</id>
  <icon>../favicon.ico</icon>

  <title>Sam Ruby</title>
  <subtitle>It’s just data</subtitle>
  <author>
    <name>Sam Ruby</name>
    <email>rubys@intertwingly.net</email>
    <uri>/blog/</uri>
  </author>
  <updated>2010-02-02T21:41:49-05:00</updated>
  <link href="/blog/"/>
  <link rel="license" href="http://creativecommons.org/licenses/BSD/"/>

  <entry>
    <id>tag:intertwingly.net,2004:3109</id>
    <link href="/blog/2010/02/01/Rails-3-0-on-Cygwin"/>
    <link rel="replies" href="3109.atom" thr:count="5" thr:updated="2010-02-02T21:41:41-05:00"/>
    <title>Rails 3.0 on Cygwin</title>
    <summary type="xhtml"><div xmlns="http://www.w3.org/1999/xhtml">Rails 3.0 requires 1.8.7 or later.  Both <a href="http://rubyforge.org/projects/instantrails/">InstantRails</a>  and <a href="http://rubyforge.org/projects/rubyinstaller/">RubyInstaller</a> bundle Ruby 1.8.6.  The files on the <a href="http://www.ruby-lang.org/en/downloads/">Ruby site</a> seem to be a <a href="">scavenger hunt</a>.  While RubyInstaller RC2 development is <a href="http://rubyinstaller.org/">underway</a>, we can run today with Cygwin.</div></summary>
    <content type="xhtml"><div xmlns="http://www.w3.org/1999/xhtml"><svg style="float:right" xmlns='http://www.w3.org/2000/svg' width="100" height="100" viewBox="0 0 100 100">
<g stroke-linejoin='round' stroke-width='4'>
<path d='M94,19l-28-9h-39c-9,0-19,9-19,19v47c0,9,10,19,19,19h39l28-10l-28-9h-26c-9,0-13-3-13-13v-22c0-10,4-13,13-13h26z' fill='#000' stroke='#000'></path>
<path d='M94,52l-41-11h-13v3c10,0,10,16,0,16v3h13z' fill='#0F0' stroke='#0F0'></path>
</g>
</svg>
<p>Rails 3.0 requires 1.8.7 or later.  Both <a href="http://rubyforge.org/projects/instantrails/">InstantRails</a>  and <a href="http://rubyforge.org/projects/rubyinstaller/">RubyInstaller</a> bundle Ruby 1.8.6.  The files on the <a href="http://www.ruby-lang.org/en/downloads/">Ruby site</a> seem to be a <a href="">scavenger hunt</a>.  While RubyInstaller RC2 development is <a href="http://rubyinstaller.org/">underway</a>, we can run today with Cygwin.</p>
<p>On the right of the <a href="http://www.cygwin.com/">Cygwin page</a> you will find a link to “Install Cygwin now”.  The UI for the installation is a little unusual, the basic process is documented <a href="http://x.cygwin.com/docs/ug/setup-cygwin-x-installing.html">here</a>.</p>
<p>When you get to step 15 (yes, step 15), you will want to select the following:</p>
<ul>
<li>ruby</li>
<li>sqlite3</li>
<li>libsqlite3-devel</li>
<li>wget</li>
<li>make</li>
<li>gcc</li>
<li>git</li>
<li>curl</li>
</ul>

<p>Hint: I find it is easiest to first click on view (top right) to get a alphabetical list of all packages, then use the search box (top left) to filter the list, and then select the individual packages.</p>
<p>Cygwin itself provides a minimal shell window.  You can use the <a href="http://sourceforge.net/projects/console/files/">Console</a> program to give you a nicer window.  This program doesn’t have a proper installer, instead you simply unzip the file you downloaded.  In the directory that produced, create a shortcut to the Console executable (right click on Console, select “Create shortcut”) and then drag that shortcut out to some place where you can find it later (e.g., desktop or quick launch toolbar).  Launch a Console window using this shortcut to see a Windows command prompt.  Select Edit -&gt; Settings, and set the shell to <code>C:\cygwin\bin\bash -l</code>.  Select OK, then exit and relaunch the console and you now have a bash prompt.</p>
<p><a href="http://notepad-plus.sourceforge.net/uk/site.htm">Notepad++</a> is a free editor that understands Unix conventions.  Select and run the installer from <a href="http://sourceforge.net/projects/notepad-plus/files/">here</a>.  Launch Notepad++, and from there navigate to your bash configuration file:</p>
<p>  File → Open → Computer → c: → cygwin → home → <em>yourname</em> → .bashrc</p>
<p>Insert the following at the bottom:</p>
<code>alias edit='cygstart "/cygdrive/c/Program Files (x86)/Notepad++/notepad++.exe"'</code>
<p>You might need to adjust this path slightly.  On Windows XP, for example, I don’t seem to have the “ (x86)” part.  Once complete, save the file.  Now close any open Console windows and launch a new one.  Inside that console, execute the following commands:</p>
<pre class="code">wget http://rubyforge.org/frs/download.php/60718/rubygems-1.3.5.tgz
tar xzf rubygems-1.3.5.tgz
cd rubygems-1.3.5
ruby setup
cd ..
gem install sqlite3-ruby</pre>
<p>Now you can install rails normally (gem install rails), or checkout the <a href="http://github.com/rails/rails">latest</a> using git.  You can now edit files (e.g., <code>config/database.yml</code>) using the alias you set up:</p>
<pre class="code">edit config/database.yml</pre>
<p><a href="http://intertwingly.net/projects/AWDwR3/checkdepot-cygwin.html">Results</a> following the scenario described in <a href="http://www.pragprog.com/titles/rails3/agile-web-development-with-rails-third-edition">AWDwR3</a> closely match results on <a href="http://intertwingly.net/projects/dashboard.html">Ubuntu</a>.</p></div></content>
    <updated>2010-02-01T21:10:26-05:00</updated>
  </entry>

  <entry>
    <id>tag:intertwingly.net,2004:3108</id>
    <link href="/blog/2010/01/31/FireBug-Ubuntu-AMD64"/>
    <link rel="replies" href="3108.atom" thr:count="0"/>
    <title>FireBug + Ubuntu + AMD64</title>
    <content type="xhtml"><div xmlns="http://www.w3.org/1999/xhtml"><svg style="float:right" xmlns="http://www.w3.org/2000/svg" width="133" height="78" viewBox="0 0 133 78">
  <path d="M23,72c-2,0-3,2-5,2c-1-2,2-4,2-7c-3,0-4,4-6,4c1-6,9-12,4-12c0,0-10,7-11,6c2-2,10-14,7-14c-1,0-7,4-9,4c0-2,9-10,10-11c2,0,3-2,2-3c-5,0-11,8-15,6l2-2c1-1,16-14,16-16c-3-2-13,6-18,6c22-24,38-33,47-35c7,0,14,2,21,3c0,3,12-1,13-1c5,0,9,4,11,8c0,1,0,2,0,4c3,11,31,7,35,19c0,5,1,9,2,14c-2,4-2,12-6,13c-4,1-4,1-4,1c-3,2-7,5-10,6c0,0-16-6-20-3c-12,4-16,8-19,20l-49-3"></path>
  <path fill="#FFF" d="M86,22l-1-2h3v2h-2M83,19l-2,1l-1-2h2l1,1M122,57l-1-2c-1,0-1,1-3,1c0-1,0-3,0-4h2l1,2c1-1,2-1,3-1c1,1,1,2,0,3l-2,1M113,56c0-1,0-2,0-3c0-1,1-2,3-2c0,4,0,4-3,5M109,55c0-1-1-3,0-4h2c1,2,0,4-2,4M106,54l-2-2c-1,0-2,1-3,0c-1,0-1-2,0-4c1,0,2,0,3,1v2c1,0,2-1,3-1c1,0,0,2,0,3l-1,1M96,50c-2-1-1-2-1-4c2,0,3,0,4,2c-1,1-2,2-3,2"></path>
  <path fill="#ED1C24" d="M40,75v-2c-2,0-9,2-9-2c0-2,5-8,3-8c-3-6-7-11-10-17c2-1,0-3,2-6c3-1,2,4,5,3c-4-17,5-22,5-22c-3,0-4,0-6,1c1-7,11-14,17-15c5-1,15-3,18,2c0,1-1,2-1,3c4,0,10-4,15-5c2-1,4-1,7,0l1,2c-7-3-17,3-23,6c-1,0-2,1-3,1l1,1c3,1,4,2,8,2c1,1,2,2,3,3c1,1,2,2,3,2c0-2,0-2-1-4c1-2-1-3,2-5c2,0,2,1,3,1c-4,4-2,8,10,9c1,0,3,1,3-2c-2,0-2-2-2-3l2,1c1,3,27,7,31,12c1,2,0,3-4,5c0,2,2,5,3,6l2-2l1,1c0,2,0,3,0,5v1c-1,0-2,0-3,0c-4-1-9-1-13-1c-11-5-25-16-36-20c-2-1-1-1-4-1c0,2,1,2,3,3c3,4,6,6,5,11l-1,2c-4,0-1-8-4-9c-10,8,5,25,13,20c-4-2-4-4-4-5c10,5,31,10,33,11c0,1-4,1-4,2c-5,1-13-2-17-4c-5-1-11,7-22,4c-2-1-13-8-15-8c0,4,9,12,11,13l0,2c-2,2-5,5-5,7"></path>
  <path d="M80,24c3,1,11,4,9,5c-3,0-8,0-9-3v-2m-36-4l-2,2c0-1,1-3,1-3c3-6,9-8,14-7l0,1c-8,2-6,12-7,12c-2-1-3-5-6-5m0,34c0-6-8-17,3-22c1,0-2,15,7,19v2c-2,0-3,0-5,0c-1-2-1-1-2-1c0,2,1,5,1,7c-1-1-3-3-4-5m14-26c0-2-2-3,0-4c2,0,3-2,3-4c2,0,5,2,6,3c0,2-1,2-2,4c1,2,1,2,1,4h-1c-2,0-8-1-8,1c-2,0-3,0-5,0c-1-1,1-2,1-3c2,0,3-1,5-1"></path>
</svg>
<p>Tools =&gt; AddOns =&gt; Extensions =&gt; Firebug 1.5.0 =&gt; Uninstall =&gt; Uninstall =&gt; Restart Firefox</p>
<code>sudo apt-get install firebug</code>
<p>Restart Firefox</p>
<p>Fixes <a href="https://bugs.launchpad.net/ubuntu/+source/firefox-3.5/+bug/449744">bug 449744</a>.</p></div></content>
    <updated>2010-01-31T10:35:52-05:00</updated>
  </entry>

  <entry>
    <id>tag:intertwingly.net,2004:3107</id>
    <link href="/blog/2010/01/29/Evolution-of-Tinkering"/>
    <link rel="replies" href="3107.atom" thr:count="7" thr:updated="2010-02-01T19:57:02-05:00"/>
    <title>Evolution of Tinkering</title>
    <summary type="xhtml"><div xmlns="http://www.w3.org/1999/xhtml"><a href="http://radar.oreilly.com/2010/01/the-ipad-is-the-iprius-your-co.html?utm_source=feedburner&amp;utm_medium=feed&amp;utm_campaign=Feed%3A+oreilly%2Fradar%2Fatom+%28O%27Reilly+Radar%29">Jim Stogdill</a>: <em>The automobile went through a similar evolution. From eminently hackable to hood essentially sealed shut. When the automobile was new, you HAD to be a mechanic to own one. Later, being a mechanic gave you the option of tinkering and adapting it to your specific interests. In fact, that’s how most people up until about 1985 learned to be mechanics.</em></div></summary>
    <content type="xhtml"><div xmlns="http://www.w3.org/1999/xhtml"><svg style="float:right" xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100">
  <circle cx="50" cy="50" r="48" fill="none" stroke="#000"></circle>
  <path d="M50,2a48,48 0 1 1 0,96a24 24 0 1 1 0-48a24 24 0 1 0 0-48"></path>
  <circle cx="50" cy="26" r="6"></circle>
  <circle cx="50" cy="74" r="6" fill="#FFF"></circle>
</svg>
<p><a href="http://radar.oreilly.com/2010/01/the-ipad-is-the-iprius-your-co.html?utm_source=feedburner&amp;utm_medium=feed&amp;utm_campaign=Feed%3A+oreilly%2Fradar%2Fatom+%28O%27Reilly+Radar%29"><cite>Jim Stogdill</cite></a>: <em>The automobile went through a similar evolution. From eminently hackable to hood essentially sealed shut. When the automobile was new, you HAD to be a mechanic to own one. Later, being a mechanic gave you the option of tinkering and adapting it to your specific interests. In fact, that’s how most people up until about 1985 learned to be mechanics.</em></p>
<ul>
<li>How many people out here have changed an alternator?  (I have, twice) Replaced spark plugs (ditto, several times) or spark plug wires? (once).  Not to mention batteries and other parts.  As a teenager in the 70’s, this was not unusual.  See <a href="http://intertwingly.net/stories/2010/01/29/autorepair.jpg">this picture</a>.  Look familiar to anyone?</li>
<li>My daughter works part time at Best Buy.  Some of her co-workers were amazed that I had <a href="http://intertwingly.net/blog/2010/01/27/Retro-Virus">wiped the virus off of my wife’s computer</a>.  They charge big bucks for this service.</li>
<li><a href="http://diveintomark.org/archives/2010/01/29/tinkerers-sunset">Tinkering skills</a> will always be in demand.  I, for one, and pleased to see that hacking skill have progressed from <a href="http://weblog.ceicher.com/archives/2006/12/ibm_system360_green_card.html">here</a> to <a href="http://diveintohtml5.org/">here</a>.</li>
</ul></div></content>
    <updated>2010-01-29T18:13:45-05:00</updated>
  </entry>

  <entry>
    <id>tag:intertwingly.net,2004:3106</id>
    <link href="/blog/2010/01/28/Secretary-Workflow"/>
    <link rel="replies" href="3106.atom" thr:count="2" thr:updated="2010-01-28T16:10:41-05:00"/>
    <title>Secretary Workflow</title>
    <summary>The next step of automating the workflow of the Apache Software Foundation secretarial task went operational today: automatic sending of confirmation emails once documents are received and filed.</summary>
    <content type="xhtml"><div xmlns="http://www.w3.org/1999/xhtml"><svg style="float:right" xmlns="http://www.w3.org/2000/svg" width="120" height="80" viewBox="0 0 120 80">
  <g stroke-linejoin="round" stroke-linecap="round">
    <path d="M7,7H113V73H7Z" fill="none" stroke="#000" stroke-width="3"></path>
    <path d="M58,42h45M61,50h42M63,58h40" stroke="#00F" stroke-width="4"></path>
    <path d="M85,15h18v14h-18z" fill="#FF0" stroke="#00F" stroke-width="2"></path>
  </g>
</svg>
<p>The next step of automating the workflow of the Apache Software Foundation secretarial task went operational today.  The current flow now looks like this:</p>
<ul>
<li>Person prints and signs a <a href="http://www.apache.org/licenses/#clas">document</a></li>
<li>Said document is scanned, photographed, faxed, or sent via postal mail to the ASF.  In all but the latter case, this results in an email to both myself and to <a href="http://people.apache.org/~clr/CraigRussell-large.jpg">Craig Russell</a>.  In the case of postal mail, it eventually arrives at my house, where I simply scan the document, and proceed to Step 5.</li>
<li>All such email is archived in <a href="http://en.wikipedia.org/wiki/Mbox">mbox format</a> on <a href="http://minotaur.apache.org/">minotaur.apache.org</a>.</li>
<li>I have a cron job which <a href="http://intertwingly.net/blog/2009/04/30/Auto-Detach">detaches</a> the documents and stores them in svn for processing.  Additionally, the name, email address, message id, and subject are stored in <a href="http://svnbook.red-bean.com/en/1.5/svn.ref.properties.html">Subversion properties</a> for later use.  The act of committing this also causes an email to go out to those at the ASF that watch for such things.</li>
<li>I have a ruby based CGI application that makes use of frames and even a small amount of AJAX.  Within the browser, either Craig or I can select a document that is in the received folder, view it in a second frame, transform it using <a href="http://www.imagemagick.org/script/index.php">ImageMagic</a> or <a href="http://www.accesspdf.com/pdftk/">pdftk</a>, and file it.  The act of committing the document and associated files we use to track the document causes more email messages.  Additionally - and this is new as of this week - <a href="http://lindsaar.net/">Mikel Lindsaar’s</a> <a href="http://github.com/mikel/mail">mail</a> gem is used to send out emails to the person mentioned in the document (copying the original sender, should that person be different).</li>
<li>A script <a href="http://intertwingly.net/blog/2002/12/04/Making-Decisions-Online">originally written by me and now maintained by Jim Jagielski</a>, analyzes the files we use to track documents, and <a href="http://people.apache.org/~jim/committers.html#unlistedclas">publishes a list</a> for all to see.</li>
</ul>

<p>More details on the mail merge described in step 5.  It starts with a configuration file.  Here’s mine:</p>
<pre class="code">require 'rubygems'
require 'mail'

Mail.defaults do
  smtp do
    host 'smtp-server.nc.rr.com'
    helo 'intertwingly.net'
  end

  @from = 'Sam Ruby &lt;secretary@apache.org&gt;'
  @sig = %{
    -- Sam Ruby
    Secretary, Apache Software Foundation
  }
end</pre>
<p>Plus an <a href="http://www.ruby-doc.org/stdlib/libdoc/erb/rdoc/">ERB</a> template file:</p>
<pre class="code">to:   &lt;%= pubname.inspect %&gt; &lt;&lt;%= email %&gt;&gt;
from: &lt;%= from %&gt;
cc:   secretary@apache.org
bcc:  &lt;%= bcc %&gt;
subject: Your ICLA sent to Apache Secretary

Dear &lt;%= pubname %&gt;,

This message acknowledges receipt of your ICLA, which has been filed in the Apache Software Foundation records.

&lt;%= sig %&gt;</pre>
<p>And ultimately, it is processed thus (where vars is an <a href="http://ruby-doc.org/stdlib/libdoc/ostruct/rdoc/classes/OpenStruct.html">OpenStruct</a>, initially populated with data from HTML forms input and svn properties):</p>
<pre class="code"># extract fields from the Mail defaults
Mail.defaults do
  vars.sig  = instance_eval {@sig.gsub(/^ +/,'').strip}
  vars.from = instance_eval {@from}
  vars.bcc  = instance_eval {@bcc}
end

# expand template
message = ERB.new(open(template).read).result(vars.send(:binding))
headers = message.slice!(/\A(\w+: .*\r?\n)*(\r?\n)*/)

mail = Mail.new do
  # apply headers
  headers.scan(/(\w+):[ \t]*(.*)/).each do |name, value|
    send name, value unless value.empty?
  end

  body message

  # is this a reply?
  if vars.email_id
    in_reply_to vars.email_id
    references  vars.email_id

    # override subject?
    if vars.email_subject and !vars.email_subject.empty?
      subject 're: ' + vars.email_subject
    end
  end
end

# add additional cc if email:addr != email
if vars.email_addr and vars.email_addr != vars.email
  if vars.email_name
    cc = "#{vars.email_name.inspect} &lt;#{vars.email_addr}&gt;"
  else
    cc = vars.email_addr
  end

  mail.cc = (mail.cc + [cc]).join(', ')
end

# ship it!
mail.deliver!</pre></div></content>
    <updated>2010-01-28T13:40:56-05:00</updated>
  </entry>

  <entry>
    <id>tag:intertwingly.net,2004:3105</id>
    <link href="/blog/2010/01/28/Think-Different"/>
    <link rel="replies" href="3105.atom" thr:count="8" thr:updated="2010-02-02T14:45:10-05:00"/>
    <title>Think Different</title>
    <summary type="xhtml"><div xmlns="http://www.w3.org/1999/xhtml"><p><a href="http://www.tbray.org/ongoing/When/201x/2010/01/27/iPad">Tim Bray</a> <em>For creative people, this device is nothing.</em>  Tim also is quite concerned about losing access to <a href="http://twitter.com/timbray/status/8298273286">emacs</a>.</p>
<p>Imagine a 2.66GHz Intel computer with five USB 2.0 ports, one FireWire 800 port, a mini-DVI port, and a DVD burner.  Comes with a wireless keyboard and a 9.7 inch wireless display.  The display is fully touch enabled, and can even support a virtual keyboard.  Yes, this system runs EMACs.  It also can run J2EE, Ruby on Rails, and Django.  The display connects to the base station via 802.11, and supports both canvas and AJAX.  Comes with OS/X, but you can also install Windows 7 and/or Linux alongside it if that is your preference.</p></div></summary>
    <content type="xhtml"><div xmlns="http://www.w3.org/1999/xhtml"><svg style="float:right" xmlns='http://www.w3.org/2000/svg' width="90" height="100" viewBox="0 0 90 100">
  <path d='M62,0c2,10-9,24-20,24c-3-14,9-22,20-24M5,36c5-8,13-12,21-12c7,0,12,4,19,4c6,0,10-4,19-4c6,0,14,3,19,10c-16,4-15,35,3,39c-7,17-18,27-24,27c-7,0-8-5-17-5c-9,0-11,5-17,5c-7-1-13-7-17-13c-9-10-15-40-6-51' fill='#AAA'></path>
</svg>
<p><a href="http://www.tbray.org/ongoing/When/201x/2010/01/27/iPad">Tim Bray</a> <em>For creative people, this device is nothing.</em>  Tim also is quite concerned about losing access to <a href="http://twitter.com/timbray/status/8298273286">emacs</a>.</p>
<p>In the 70s, text ruled.  In the 90s, GUIs and mice ruled.  In the 10s, touch.</p>
<p>I can get to the Internet from my server, from my desktop, from my laptop, from my netbook, and from my phone.  While my next phone will undoubtedly support touch, my current one does not.  None of my other devices do, and frankly, they should not.</p>
<p>Imagine a 2.66GHz Intel computer with five USB 2.0 ports, one FireWire 800 port, a mini-DVI port, and a DVD burner.  Comes with a wireless keyboard and a 9.7 inch wireless display.  The display is fully touch enabled, and can even support a virtual keyboard.  Yes, this system runs EMACs.  It also can run J2EE, Ruby on Rails, and Django.  The display connects to the base station via 802.11, and supports both canvas and AJAX.  Comes with OS/X, but you can also install Windows 7 and/or Linux alongside it if that is your preference.</p>
<p>Would such a system be worth $1,200?  If so, you can have it in 60 days: <a href="http://www.apple.com/macmini/" title="Mac Mini">$599</a> + <a href="http://www.apple.com/ipad/" title="iPad">$499</a> + <a href="http://www.apple.com/keyboard/" title="keyboard">$69</a> + <a href="http://www.jaaduvnc.com/features" title="VNC">$25</a> + <a href="http://www.messagingnews.com/onmessage/ben-gross/iphone-ssh-clients-reviewed-issh-pterm-and-touchterm" title="ssh">$5</a>.</p>
<p>Even better, the system is modular.  You not only can connect to your base station, but to any node on the network, be it in a humble printer or the glorious cloud.  In fact, if you already have one or more of nodes that you are interested in, you can omit the base station and keyboard, and get started for half the price quoted above.</p>
<p>In short, I’m with <a href="http://yehudakatz.com/2010/01/27/the-irony-of-the-ipad-a-great-day-for-open-technologies/">Yehuda</a>.  If you wish to be open, you simply need to be creative.  Best of all from my perspective: I’m confident that everything the iPad has to offer, plus video camera, plus VoIP will be available from <a href="https://www.alwaysinnovating.com/touchbook/">multiple</a> <a href="http://techielobang.com/blog/2010/01/05/lenovo-ideapad-u1-hybrid-is-a-laptop-and-a-tablet/">sources</a> in the $200-$299 price range by late 2012.  See also <a href="http://blog.headius.com/2010/01/five-reasons-to-wait-on-ipad.html">Charles Nutter’s take</a>.</p></div></content>
    <updated>2010-01-28T10:32:01-05:00</updated>
  </entry>

  <entry>
    <id>tag:intertwingly.net,2004:3104</id>
    <link href="/blog/2010/01/27/Retro-Virus"/>
    <link rel="replies" href="3104.atom" thr:count="2" thr:updated="2010-01-29T18:16:58-05:00"/>
    <title>Retro Virus</title>
    <summary type="xhtml"><div xmlns="http://www.w3.org/1999/xhtml"><p><a href="http://xkcd.com/694/">Randall Munroe</a>: <em>HAHA, CLEANING VIRUSES?  MAN, WHAT A BLAST FROM THE PAST!</em></p>
<p>How timely.  Within the past week, both my sister-in-law and my wife’s netbooks got hit by viruses.  I spent yesterday wiping and reinstalling my wife’s machine.  While many of the details have changed, the overall process was very <a href="http://intertwingly.net/blog/2006/07/02/Repave-Periodically">familiar</a>.</p></div></summary>
    <content type="xhtml"><div xmlns="http://www.w3.org/1999/xhtml"><svg style="float:right" xmlns="http://www.w3.org/2000/svg" width="105" height="95" viewBox="0 0 105 95">
<path fill="#7B4" d="M106,13c-21,9-31,4-40-2l-10,35c9,6,20,11,40,2l10-35z"></path>
<path fill="#49c" d="M39,83c-9-6-18-10-39-2l10-35c21-9,31-4,39,2l-10,35z"></path>
<path fill="#E63" d="M51,42c-5-4-11-7-19-7c-6,0-12,1-20,5l10-35c20-8,30-4,39,2l-10,35z"></path>
<path fill="#FD5" d="M55,52c9,6,18,10,39,2l-10,35c-21,8-30,3-39-3l10-34z"></path>
</svg>
<p><a href="http://xkcd.com/694/"><cite>Randall Munroe</cite></a>: <em>HAHA, CLEANING VIRUSES?  MAN, WHAT A BLAST FROM THE PAST!</em></p>
<p>How timely.  Within the past week, both my sister-in-law and my wife’s netbooks got hit by viruses.  I spent yesterday wiping and reinstalling my wife’s machine.  While many of the details have changed, the overall process was very <a href="http://intertwingly.net/blog/2006/07/02/Repave-Periodically">familiar</a>: install Ubuntu to a USB drive, boot Ubuntu, rsync all of the files off the machine, reset to factory settings, install numerous updates, install a <a href="http://www.microsoft.com/Security_essentials/">virus scanner</a>, install firefox, thunderbird, pidgin, and printer drivers; copy over profiles and settings, and the data files that were on her Desktop.</p>
<p>Since my sister-in-law is three hours away, and only uses her netbook for the net, she may get upgraded to Ubuntu.  Particularly as I don’t know if it is possible to restore the original Windows install on an EEE 900A (<a href="http://intertwingly.net/blog/2008/10/17/Eee-Owner">mine</a> came win Xandros, long since replaced first by <a href="http://intertwingly.net/blog/2009/01/08/Easy-Peasy">Easy Peasy</a> then by <a href="http://intertwingly.net/blog/2009/10/30/Ubuntu-Netbook-Remix">Ubuntu NetBook Remix</a>).</p>
<p>As for my wife: various <a href="http://www.hmarc.com/S-10/">upgrades</a> may be in her future too.</p></div></content>
    <updated>2010-01-27T09:34:12-05:00</updated>
  </entry>

  <entry>
    <id>tag:intertwingly.net,2004:3103</id>
    <link href="/blog/2010/01/21/Content-Disposition"/>
    <link rel="replies" href="3103.atom" thr:count="4" thr:updated="2010-01-23T17:57:05-05:00"/>
    <title>Content-Disposition</title>
    <content type="xhtml"><div xmlns="http://www.w3.org/1999/xhtml"><svg style="float:right" xmlns="http://www.w3.org/2000/svg" width="90" height="111" viewBox="0 0 90 111">
  <g stroke-linejoin="bevel" stroke-linecap="square" fill="none" stroke="#000">
    <path d="M6,15l30-10l49,11v82v-82l-24,8v83v-83l-55-9v83l56,8l23-8" stroke-width="4"></path>
    <path d="M6,98l27-9v-13l-26-4l27-8v-20l-27-5l28-8v-11v11l49,10l-24,8l-26-5v20l50,8l-24,9l-27-5v13l51,8" stroke-width="2"></path>
  </g>
</svg>
<p>Yesterday, I <a href="http://github.com/rack/rack/commit/a36ac970fd682f07c3e57756542791679f5fcf84">collaborated</a> with <a href="http://joshpeek.com/">Joshua Peek</a> on improving the parsing of the Content-Disposition header in Rack.  Content-Disposition is used on <a href="http://www.ietf.org/rfc/rfc1867.txt">file upload</a> scenarios.</p>
<p>The previous state was that rack used a simplistic regular expression that didn’t match either the RFC or what browsers actually sent.  What the new code does is first try to strictly follow <a href="http://www.ietf.org/rfc/rfc2183.txt">RFC 2183</a>.  When that fails, it tries to follow what browsers actually do.  And in this case, what browsers actually do is slap quotes around the file name, independent of whether the file name contains backslashes or quotes.  A notable exception to this is recent versions of Chrome.</p></div></content>
    <updated>2010-01-21T11:02:49-05:00</updated>
  </entry>

  <entry>
    <id>tag:intertwingly.net,2004:3102</id>
    <link href="/blog/2010/01/15/Peg-svn-revisions"/>
    <link rel="replies" href="3102.atom" thr:count="2" thr:updated="2010-01-20T07:49:14-05:00"/>
    <title>Peg svn revisions</title>
    <summary type="xhtml"><div xmlns="http://www.w3.org/1999/xhtml"><p><a href="http://svnbook.red-bean.com/nightly/en/svn.advanced.pegrevs.html">Ben Collins-Sussman, Brian W. Fitzpatrick, and C. Michael Pilato</a>: <em>You need only append an at sign to the end of the path, such as news@11@</em></p>
<p>But only for <a href="http://subversion.tigris.org/svn_1.5_releasenotes.html#copy-peg-revs">versions of svn &gt;= 1.5</a>.  Very annoying.  Especially if you have a script that works for everything you throw at it, until it comes across a file with name containing an ‘@’.  So you dutifully add the ‘@’ as <a href="http://stackoverflow.com/questions/1985203/why-subversion-skips-files-which-contain-the-symbol">others have done</a>, find that the code passes all of your tests and then fails on a co-worker’s machine who is running a different version of svn.</p></div></summary>
    <content type="xhtml"><div xmlns="http://www.w3.org/1999/xhtml"><svg style="float:right" xmlns='http://www.w3.org/2000/svg' width="117" height="85" viewBox="0 0 117 85">
  <g fill="#809CC8">
    <path d='M0,1h110c-38,6-75,17-110,29z'></path>
    <path d='M115,85l0-31c-42,16,-87,25,-115,30z'></path>
    <path d='M115,27v-20c-90,14-137,43,0,23'></path>
    <path d='M0,78v-26c194-24,31,26,1,26'></path>
  </g>
  <g fill="white" stroke="white" opacity="0.8" stroke-opacity="0.3">
    <ellipse rx="0.5" ry="1" cx="5" cy="61"></ellipse>
    <ellipse rx="0.5" ry="1" cx="9" cy="61"></ellipse>
    <ellipse rx="0.5" ry="1" cx="5" cy="69"></ellipse>
    <ellipse rx="0.5" ry="1" cx="9" cy="69"></ellipse>
  </g>
</svg>
<p><a href="http://svnbook.red-bean.com/nightly/en/svn.advanced.pegrevs.html"><cite>Ben Collins-Sussman, Brian W. Fitzpatrick, and C. Michael Pilato</cite></a>: <em>You need only append an at sign to the end of the path, such as news@11@.</em></p>
<p>But only for <a href="http://subversion.tigris.org/svn_1.5_releasenotes.html#copy-peg-revs">versions of svn &gt;= 1.5</a>.  Very annoying.  Especially if you have a script that works for everything you throw at it, until it comes across a file with name containing an ‘@’.  So you dutifully add the ‘@’ as <a href="http://stackoverflow.com/questions/1985203/why-subversion-skips-files-which-contain-the-symbol">others have done</a>, find that the code passes all of your tests and then fails on a co-worker’s machine who is running a different version of svn.</p>
<p>Code to determine what to append to a given name for use in svn commands (including, BTW, proplist, propget, propset,...):</p>
<pre class="code">def svn_at name
  if (`svn --version --quiet`.chomp.split('.') &lt;=&gt; %w(1 5)) &lt; 1
    ''
  elsif name.include? '@'
    '@'
  else
    ''
  end
end</pre>
<p>My two cents: information on the basic syntax of working copy (WC) paths as used by the command line should not be buried in a chapter named <a href="http://svnbook.red-bean.com/nightly/en/svn.advanced.html">Advanced Topics</a> in a section entitled <a href="http://svnbook.red-bean.com/nightly/en/svn.advanced.pegrevs.html">Peg and Operative Revisions</a>.</p></div></content>
    <updated>2010-01-15T09:31:30-05:00</updated>
  </entry>

  <entry>
    <id>tag:intertwingly.net,2004:3101</id>
    <link href="/blog/2009/12/24/REST-in-Raleigh"/>
    <link rel="replies" href="3101.atom" thr:count="2" thr:updated="2010-01-17T16:15:11-05:00"/>
    <title>REST in Raleigh</title>
    <content type="xhtml"><div xmlns="http://www.w3.org/1999/xhtml"><svg style="float:right" xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100">
  <path d="M10,90.1v-2h80V90.1zM10,70.1v-2h80V70.1zM10,50.1v-2h80V50.1zM10,30.1v-2h80V30.1zM10,10.1v-2h80V10.1z"></path>
  <path d="M44.4,20.8c1.5,1.6,13,15.7,13,15.7s-6.4,6.1-6.4,12.5c0,7.5,8.6,14.3,8.6,14.3l-0.9,1.1c-3.3-1.9-8.9-2.1-11.4,0.8c-3.1,3.6,3.9,9.1,3.9,9.1l-0.8,1.1c-2.4-1.8-12.6-11.4-8.3-16.1c2.6-2.9,5.8-3.8,10.3-1.4l-12.1-12.5c7-8.6,8.2-11.1,8.2-13.4c0-4.8-3.4-8.2-5.1-10.4c-0.6-0.9-1.7-1.6-1-2.2C43.1,18.9,43.5,19.7,44.4,20.8z" fill="#F33"></path>
</svg>
<p>Darrel Miller: <em>Was the idea to call the REST workshop WS-REST designed to be as inflammatory as possible? <a href="http://www.ws-rest.org">http://www.ws-rest.org</a></em> [via <a href="http://twitter.com/donbox/status/6973196040"><cite>Don Box</cite></a>]</p>
<p>Oh, cool, a <a href="http://www2010.org/www/">conference</a> with a topic I’m interested in in my back yard!</p>
<p>It’s a shame it is too late to submit a talk proposal.  Guess I’ll get to enjoy it as a civilian.</p></div></content>
    <updated>2009-12-24T05:52:31-05:00</updated>
  </entry>

  <entry>
    <id>tag:intertwingly.net,2004:3100</id>
    <link href="/blog/2009/12/21/PowerNap"/>
    <link rel="replies" href="3100.atom" thr:count="0"/>
    <title>PowerNap</title>
    <content type="xhtml"><div xmlns="http://www.w3.org/1999/xhtml"><svg style="float:right" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="140" height="140" viewBox="-70 -70 140 140">

  <defs>
    <path id="b" d="M 23,-20 A32,32 0,0,0 -23,-20 L -40,-30 A42,42 0,0,1 -14,-47 A17,17 0,0,0 14,-47 A42,42 0,0,1 40,-30 Z"></path>
    <circle id="h" cx="0" cy="-57" r="12"></circle>
  </defs>

  <g transform="translate(5,5)" opacity="0.125">
    <use xlink:href="#h" transform="rotate(30)"></use>
    <use xlink:href="#b" transform="rotate(30)"></use>
    <use xlink:href="#h" transform="rotate(150)"></use>
    <use xlink:href="#b" transform="rotate(150)"></use>
    <use xlink:href="#h" transform="rotate(-90)"></use>
    <use xlink:href="#b" transform="rotate(-90)"></use>
  </g>

  <a xlink:href="http://www.ubuntu.com/">
    <use xlink:href="#h" fill="#d00" transform="rotate(30)"></use>
    <use xlink:href="#b" fill="#f40" transform="rotate(30)"></use>
    <use xlink:href="#h" fill="#f80" transform="rotate(150)"></use>
    <use xlink:href="#b" fill="#d00" transform="rotate(150)"></use>
    <use xlink:href="#h" fill="#f40" transform="rotate(-90)"></use>
    <use xlink:href="#b" fill="#f80" transform="rotate(-90)"></use>
  </a>

</svg>
<p>Just noticed a new addition to Ubuntu: <a href="http://blog.dustinkirkland.com/2009/07/introducing-powernap.html">PowerNap</a>.  I have a server that I use to offload running some tests from my primary development machine.  I start jobs via a web interface, and they retrieve the sources to test using git and svn.  The net result is that there is no keyboard or mouse activity, not even ssh.</p>
<p>PowerNap’s value proposition is that it monitors processes, looking for arbitrary regular expressions, and considers the presence of matching processes as activity.  Simple and effective.</p>
<p>PowerWake determines and caches MAC addresses, simplifying wakeup.</p></div></content>
    <updated>2009-12-21T08:20:09-05:00</updated>
  </entry>

  <entry>
    <id>tag:intertwingly.net,2004:3099</id>
    <link href="/blog/2009/12/20/Zap-Gremlins"/>
    <link rel="replies" href="3099.atom" thr:count="0"/>
    <title>Zap Gremlins</title>
    <summary type="xhtml"><div xmlns="http://www.w3.org/1999/xhtml">Monthly, the Apache Software Foundation has a board meeting, and the work flow that leads up to this is that a rotating selection of <a href="http://www.apache.org/foundation/">Officers</a> prepare written reports and either commit them directly to subversion or email them to a mailing list where they will be picked up.  <br />
It is an unfortunate truth that a number of these officers are still using proprietary operating systems and tools.  The end result is predictable: a file which contains a number of encoding errors.</div></summary>
    <content type="xhtml"><div xmlns="http://www.w3.org/1999/xhtml"><svg style="float:right" xmlns="http://www.w3.org/2000/svg" width="115" height="87" viewBox="0 0 115 87">
  <path d="M0,1v83h26c-10,0-22-11-22-21v-62zM22,1v53c0,16,22,16,22,0v-53zM41,84c10,0,22-11,22-21v-22l27,43zM60,1h30v20h19v-20h5v84h-5v-56h-19v18z" fill="#C60025"></path>
</svg>
<p>Monthly, the Apache Software Foundation has a board meeting, and the work flow that leads up to this is that a rotating selection of <a href="http://www.apache.org/foundation/">Officers</a> prepare written reports and either commit them directly to subversion or email them to a mailing list where they will be picked up.  The <a href="http://www.apache.org/foundation/records/minutes/2009/board_minutes_2009_11_18.txt">end result</a> involves a lot of copying and pasting.</p>
<p>It is an unfortunate truth that a number of these officers are still using proprietary operating systems and tools (editors and mail readers primarily) which haven’t been configured to use utf-8.  The end result is predictable: a file which contains a number of encoding errors.  Identifying them and making the necessary corrections has therefore become a small but necessary part of making the agenda and minutes.</p>
<p>Yesterday, I made a <a href="http://intertwingly.net/stories/2009/12/20/zap-gremlins.rb">small script</a> (<a href="http://intertwingly.net/stories/2009/12/20/zap-gremlins.html">demo</a>) which helps in this task.</p>
<p>I guess this application qualifies as <a href="http://yugui.jp/articles/850">middleware</a>.</p></div></content>
    <updated>2009-12-20T08:19:28-05:00</updated>
  </entry>

  <entry>
    <id>tag:intertwingly.net,2004:3098</id>
    <link href="/blog/2009/12/16/WebSockets"/>
    <link rel="replies" href="3098.atom" thr:count="11" thr:updated="2009-12-21T13:26:36-05:00"/>
    <title>WebSockets</title>
    <content type="xhtml"><div xmlns="http://www.w3.org/1999/xhtml"><svg style="float:right" xmlns="http://www.w3.org/2000/svg" width="125" height="80" viewBox="0 0 125 80">
  <path d="M0,0h19c-5,5-30,40,4,82h-23zM46,19a17,17 0,0,1 34,0zM108,0c3,5,7,9,9,27v10h-72c0,40,34,53,57,17l18,10s-3,6,-12,16h17v-125z" fill="#903"></path>
</svg>
<p><a href="http://armstrongonsoftware.blogspot.com/2009/12/comet-is-dead-long-live-websockets.html"><cite>Joe Armstrong</cite></a>: <em>After a small amount of experimentation I was able to make Erlang talk to a web page using pure asynchronous message passing.  I think this means the death of the following technologies:</em></p>
<ul>
<li><em>comet</em></li>
<li><em>long-poll</em></li>
<li><em>AJAX</em></li>
<li><em>keep-alive sockets</em></li>
</ul>

<p>I see the appeal for a single node Erlang or Eventmachine or node.js server.  (Can sockets be passed between servers?)</p>
<p>I’m less clear about how this could work with request/response servers like PHP or Rails.  <a href="http://code.google.com/p/pywebsocket/source/browse/trunk/src/example/echo_wsh.py">Event loops</a> on the server are not typically application patterns for applications using such frameworks — <a href="http://en.wikipedia.org/wiki/Shared_nothing_architecture">shared nothing</a> is more of the norm.</p></div></content>
    <updated>2009-12-16T15:08:48-05:00</updated>
  </entry>

  <entry>
    <id>tag:intertwingly.net,2004:3097</id>
    <link href="/blog/2009/12/15/Relaxed-Inc"/>
    <link rel="replies" href="3097.atom" thr:count="1" thr:updated="2009-12-16T00:55:15-05:00"/>
    <title>Relaxed Inc.</title>
    <content type="xhtml"><div xmlns="http://www.w3.org/1999/xhtml"><svg style="float:right" xmlns="http://www.w3.org/2000/svg" width="135" height="74" viewBox="0 0 135 74">
  <path d="M9,0h117v24h9v50h-135v-50h9z" fill="#d60000"></path>
  <path d="M12,3h111v24h8v44h-15v-16l-58,3l-21-1l-18-2v16h-15v-44h15v15l12,3l4,2h20l39-2h21v-17l-11,8l-92-17" fill="#eb1a22"></path>
  <path d="M15-1h17v9l40-23l9,19h-8v4l-4-4h-11l-12,10l8,11l25-9l25,20l10,4l1,5h-21l-2-3l-2,1l-13-11l-22,15l6,27h-17v-3l-3-1l-6-23l-4-2l-12-19h-4l2,2v4l-3-2v7l-7-3v-16l12-5l-3-5z" fill="#FFF"></path>
</svg>
<p><a href="http://damienkatz.net/2009/12/relaxed_inc.html"><cite>Damien Katz</cite></a>: <em>I, <a href="http://jan.prima.de/plok/">Jan</a>, and <a href="http://jchrisa.net/">Chris</a> are building a startup around Apache CouchDB</em></p>
<p>CouchDB crossed my radar <a href="http://intertwingly.net/blog/2007/09/04/Building-CouchDB">just over two years ago</a>, a few months later, Damien was <a href="http://intertwingly.net/blog/2008/01/02/IBM-Damien-Katz">at IBM</a>, it entered incubation at the ASF a little over <a href="http://intertwingly.net/blog/2008/02/12/CouchDB-ASF">a month later</a>.  It has been an exciting project to watch.</p>
<p>My role was simply as a catalyst at a few junctures.</p></div></content>
    <updated>2009-12-15T13:55:48-05:00</updated>
  </entry>

  <entry>
    <id>tag:intertwingly.net,2004:3096</id>
    <link href="/blog/2009/12/14/Recertified"/>
    <link rel="replies" href="3096.atom" thr:count="18" thr:updated="2009-12-17T08:36:01-05:00"/>
    <title>Recertified</title>
    <summary type="xhtml"><div xmlns="http://www.w3.org/1999/xhtml"><p>Lately I’ve been moving around more between my netbook, laptop, and desktops, so having any single machine being designated as my mail portal at the moment often means that I often don’t have convenient access to my email.</p>
<p>I figured it was time to investigate running my own mail server.</p></div></summary>
    <content type="xhtml"><div xmlns="http://www.w3.org/1999/xhtml"><svg style="float:right" xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100">
  <g stroke="#000" stroke-linejoin="round">
    <path fill="#DDD" d="M27,42c-8-53,55-53,47,0h-8 c10-41-40-41-30,0h-9z"></path>
    <path fill="#CB9" d="M23,91v-50c18-3,36-2,55,0v50c-19,3-37,2-55,0z"></path>
    <path fill="#EDA" d="M23,91v-50c18-3,36-2,55,0z"></path>
    <path fill="#A87" d="M78,41v50c-19,3-37,2-55,0z"></path>
  </g>
  <path fill="#EEE" d="M30,21c5-10,7-17,23-16c-10,0-18,14-23,16"></path>
  <path fill="#CB9" d="M78,41c-50,4-50,0-55,50c50-5,50,0,55-50z"></path>
  <path fill="#000" d="M46,77h10l-3-11a6,6,0,1,0-5,0z"></path>
</svg>
<p>My preference for email is to have a local, and essentially unlimited, archive.  To date, that has meant pop3 access supplemented by GMail for much of my access to mailing lists.  Backing up and migrating my entire archive from machine to machine is a simple matter of rsync, and I’ve hosted it on Windows, Ubuntu, and Mac OS/X machines alike.</p>
<p>Lately I’ve been moving around more between my netbook, laptop, and desktops, so having any single machine being designated as my mail portal at the moment often means that I often don’t have convenient access to my email.</p>
<p>I figured it was time to investigate running my own mail server.  In the past, this always seemed like there was a bewildering options of various packages, many of which were alternatives to one another with no clear way for me to decide which to pick, and all of which can be assembled and recombined in a number of different ways.</p>
<p>With the latest Ubuntu, some of this has become simpler with the introduction of the <a href="http://packages.ubuntu.com/jaunty/dovecot-postfix">dovecot-postfix</a> package.  This selects and integrates two of the key components.</p>
<p>Installation was a snap.  I selected the option to configure my machine as <em>Internet with smarthost: Mail is received directly using SMTP or by running a utility such as fetchmail. Outgoing mail is sent using a smarthost.</em></p>
<p>This meant that I only had to answer two questions.  System mail name? <code>intertwingly.net</code>.  SMTP relay host? <code>smtp-server.nc.rr.com</code>.</p>
<p>I then pointed Thunderbird at this server, and it didn’t like what it saw.  It seems that installation had generated a certificate with an <code>CN=ubuntu</code>, which didn’t happen to match my host’s name, so it cried foul.</p>
<p>As this point, this made three self-signed certificates I was hosting: one for <a href="http://www.ejabberd.im/">EJabberD</a>, one for Apache, and now one shared by Dovecot and Postfix.  And all were causing me grief for one reason or another.</p>
<p>I hadn’t realized it, but my EJabberD certificate had expired.  The version of Pidgin that came with Ubuntu 9.04 was OK with that, but the version of Pidgin that comes with Ubuntu 9.10 complains every time I log on.</p>
<p>And Chrome flat out didn’t like my self signed certificate at all.</p>
<p>This lead me to <a href="http://forums.vpslink.com/9292-post3.html">http://forums.vpslink.com/9292-post3.html</a>, which I have lightly adapted below:</p>
<p>As superuser, and in the <code>/etc/ssl/private directory</code>:</p>
<pre class="code">openssl genrsa -des3 -out $HOSTNAME.key 2048</pre>
<p>Any password will do, as it will be removed in a minute.</p>
<pre class="code">openssl req -new -key ./$HOSTNAME.key -out $HOSTNAME.csr</pre>
<p>Be sure to specify $HOSTNAME for the Common Name when asked.</p>
<pre class="code">mv $HOSTNAME.key $HOSTNAME.key.withpassword
openssl rsa -in $HOSTNAME.key.withpassword -out $HOSTNAME.key</pre>
<p>Enter password one last time.</p>
<pre class="code">openssl x509 -req -days 3650 -in $HOSTNAME.csr -signkey $HOSTNAME.key -out $HOSTNAME.crt
cat $HOSTNAME.key $HOSTNAME.crt &gt; $HOSTNAME.pem
cp $HOSTNAME.key ../certs/$HOSTNAME.pem
chmod 0400 $HOSTNAME.*</pre>
<p>Update the following files:</p>
<ul>
<li>/etc/apache2/sites-available/ssl</li>
<li>/etc/dovecot/dovecot-postfix.conf</li>
<li>/etc/postfix/main.cf</li>
<li>/etc/ejabberd/ejabberd.cfg</li>
</ul>
<p>The formats for each are different, but identifying what to change is straightforward in each.  Each can use the same (private) certificate, though in the ejabberd case, copying the file to <code>/etc/ejabberd</code> and <code>chown ejabberd:ejabberd</code> is in order.</p>
<p>Restart the servers:</p>
<pre class="code">/etc/init.d/apache2 restart
/etc/init.d/dovecot restart
/etc/init.d/postfix restart
/etc/init.d/ejabberd restart</pre>
<p>Thunderbird is now happy.  Pidgin and Firefox each asked me once if I wanted to accept the new certificate.  This took care of everybody except Chrome, which involved copying my public key (a.k.a. “pem” file) to the client machine(s) and following the following instructions:</p>
<p><a href="http://code.google.com/p/chromium/wiki/LinuxCertManagement">http://code.google.com/p/chromium/wiki/LinuxCertManagement</a></p>
<p>Two add-ons, each with one problem each.</p>
<p>First, <a href="http://fetchmail.berlios.de/">fetchmail</a>, while it worked, complained:</p>
<pre class="code">fetchmail: connection to localhost:smtp [::1/25] failed: Connection refused.</pre>
<p>The problem is that <code>localhost</code> is listed twice in <code>/etc/hosts</code>, and apparently by default fetchmail picked the ipv6 route but the postfix that is packaged with Ubuntu is only configured for ipv4.  Specifying <code>--smtphost</code> addressed this problem.</p>
<p><a href="http://squirrelmail.org/">Squirrelmail</a> seemed to basically just work out of the box until I copy and pasted large portions of my archive into the IMap server, at which point it bailed with:</p>
<pre class="code">Fatal error: Allowed memory size of 16777216 bytes exhausted (tried to allocate 4097 bytes)</pre>
<p>Once again, the Internet to the rescue:</p>
<p><a href="http://squirrelmail.org/wiki/LowMemoryProblem">http://squirrelmail.org/wiki/LowMemoryProblem</a></p>
<p>All in all, I still have the feeling that hosting an EMail server is still a “some assembly required” proposition.</p></div></content>
    <updated>2009-12-14T20:47:41-05:00</updated>
  </entry>

  <entry>
    <id>tag:intertwingly.net,2004:3095</id>
    <link href="/blog/2009/12/11/Depot-Dashboard"/>
    <link rel="replies" href="3095.atom" thr:count="3" thr:updated="2009-12-26T22:00:50-05:00"/>
    <title>Depot Dashboard</title>
    <summary type="xhtml"><div xmlns="http://www.w3.org/1999/xhtml"><p>Sometimes the answer to information overload is to seek more information.</p>
<p>I’ve been trying to track the changes to both Rails 3.0 and Ruby 1.9.2 which affect <a href="http://www.pragprog.com/titles/rails3/agile-web-development-with-rails-third-edition">Edition 3 of Agile Web Development with Rails</a>, as well as track both with my work on Edition 4.  <a href="http://intertwingly.net/projects/dashboard.html">Depot Dashboard</a> is a static snapshot of the result, updated frequently throughout the day.</p></div></summary>
    <content type="xhtml"><div xmlns="http://www.w3.org/1999/xhtml"><svg style="float:right" xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100">
  <rect rx="10" width="100" height="100" fill="#2c2b2b"></rect>
  <g style="font-size: 70px; font-family: Georgia" fill="#f9df99">
    <text x="20" y="62"><![CDATA[P]]></text>
    <text x="38" y="86"><![CDATA[P]]></text>
  </g>
</svg>
<p>Sometimes the answer to information overload is to seek more information.</p>
<p>I’ve been trying to track the changes to both Rails 3.0 and Ruby 1.9.2 which affect <a href="http://www.pragprog.com/titles/rails3/agile-web-development-with-rails-third-edition">Edition 3 of Agile Web Development with Rails</a>, as well as track both with my work on Edition 4.  <a href="http://intertwingly.net/projects/dashboard.html">Depot Dashboard</a> is a static snapshot of the result, updated frequently throughout the day.</p>
<p>At a glance, you can see that all of the tests are passing on 2.3.5 (which actually tracks <a href="http://github.com/rails/rails/tree/2-3-stable">2-3-stable</a>, or more precisely 2.3.6-pre at this moment in time).  I can actually tell you that there is at least one <a href="http://github.com/rails/rails/commit/64082b350c90bdfe776461868b1e5414c2d2415a">fix</a> that will be going into 2.3.6 that will be needed to run on 1.9.2, that was identified as a result of my testing.</p>
<p>You can also see that all of my edition 4 tests are passing, though there is less of them at this time.  If you click through, you can see my thoughts on how the scenarios will unfold: examples of significant changes from edition 3: session data will now exclusively be stored in cookies, Carts and Line Items will be true REST based models, seed data will be used instead of a data-only migration, etc.  This is all still in flux: for example, I’m currently thinking of combining and splitting Iteration D and Iteration E to produce three smaller iterations.</p>
<p>At the present time, all of the 3.0 tests fail.  This is a recent thing, and they all contain the same failure, so that rules out changes in Ruby as a cause.  In fact, the error is simple, and I suspect rather easy to correct: the name of the path for the edit route for a nested resource is generated as (for example) <code>article_edit_comment</code>, whereas compatibility with 2.3.5 would indicate that <code>edit_article_comment</code> is the correct name.  That’s <a href="https://rails.lighthouseapp.com/projects/8994/tickets/3561">ticket 3561</a>.</p>
<p>The current run for rails3.0 also shows another anomaly that pops up from time to time in runs I make: <a href="https://rails.lighthouseapp.com/projects/8994/tickets/3400">log data in what appears to be base64</a>.  Search for “tail -25 log” in section 3.8 to see what I mean.</p>
<p>I’ve been generating tickets not just for outright bugs, but also for <a href="http://intertwingly.net/projects/AWDwR4/checkdepot.html#todos">improvements</a> to Rails which would not only make it easier for people coming to Rails, but also make Rails easier to document :-)</p>
<p>What you see on the public dashboard is only a snapshot of what the <a href="http://intertwingly.net/stories/2009/12/11/awdwr.rb">full script</a> will do: namely allow me to start and monitor jobs and dynamically update the status based on results of previous runs.  Not shown is the code that sends private IMs to me and status updates to the Rails developers using <a href="http://opensoul.org/2006/12/8/tinder-campfire-api">Tinder</a>.</p>
<p>I’ve submitted a <a href="http://en.oreilly.com/rails2010/user/proposal/">proposal</a> to <a href="http://en.oreilly.com/rails2010/">RailsConf 2010</a> to discuss my experiences, and to explore collaborating with others with similar needs.</p></div></content>
    <updated>2009-12-11T14:59:46-05:00</updated>
  </entry>

  <entry>
    <id>tag:intertwingly.net,2004:3094</id>
    <link href="/blog/2009/12/09/Collaborative-Editing-Formulas"/>
    <link rel="replies" href="3094.atom" thr:count="3" thr:updated="2010-01-17T10:07:13-05:00"/>
    <title>Collaborative Editing Formulas</title>
    <content type="xhtml"><div xmlns="http://www.w3.org/1999/xhtml"><svg style="float:right" xmlns='http://www.w3.org/2000/svg' width="100" height="90" viewBox="0 0 100 90">
  <defs>
    <linearGradient id="wave1" gradientTransform="rotate(70)">
      <stop stop-color="#F10" offset=".7"></stop><stop stop-color="#710" offset="1"></stop>
    </linearGradient>
    <linearGradient id="wave2">
      <stop stop-color="#B81" offset="0"></stop><stop stop-color="#FD6" offset=".5"></stop>
    </linearGradient>
    <filter id="wave3">
      <feGaussianBlur stdDeviation="2"></feGaussianBlur>
    </filter>
  </defs>
  <path d='M2,31c2-27,11-24,15,2z' fill='#0991ec'></path>
  <path d='M11,12c2,3,2,2,3,5l10,42c4,16,11,12,13,0l10-41l-3,8l-4,16c-2,8-4,8-6,0l-4-14z' fill='url(#wave1)'></path>
  <path d='M46,27c2,0,3,4,3,5l3,16l18,18l-10-39c-3-19-12-19-14,0' fill='url(#wave2)'></path>
  <path d='M66,44l4-18c1-3,3-5,6-6l20-8s-2,1-3,4l-11,47c-4,9-8,9-12,0z' fill='#5bb753'></path>
  <path d='M16,82l15-5l32-3l30,12h-55z' fill='#ddd' filter="url(#wave3)"></path>
</svg>
<p><a href="http://golem.ph.utexas.edu/~distler/blog/archives/002130.html"><cite>Jacques Distler</cite></a>: <em>To borrow a phrase from Samuel Johnson, “… like a dog’s walking on his hind legs. It is not done well; but you are surprised to find it done at all.”</em></p>
<p>Jacques has a way with words.  It does seem to me that collaboratively editing complex formulas and simple diagrams would be one of the use cases for Google Wave, yet I can see the vast number of separate problems that need to be solved in order for this to be addressed ubiquitously (i.e. using only the browser that the user happens to have in front of them at the time).</p></div></content>
    <updated>2009-12-09T09:29:13-05:00</updated>
  </entry>

  <entry>
    <id>tag:intertwingly.net,2004:3093</id>
    <link href="/blog/2009/12/08/Chrome-Beta"/>
    <link rel="replies" href="3093.atom" thr:count="5" thr:updated="2009-12-16T15:32:54-05:00"/>
    <title>Chrome Beta</title>
    <summary type="xhtml"><div xmlns="http://www.w3.org/1999/xhtml"><p><a href="http://blog.chromium.org/2009/12/google-chrome-for-linux-goes-beta.html">Dan Kegel and Evan Martin</a>: Google Chrome for Linux is finally ready for beta</p>
<pre class="code">sudo apt-get update
sudo apt-get remove google-chrome-unstable
sudo apt-get install google-chrome-beta</pre>
<p>Looks like a clean substitution: icon in my gnome panel still works, history is preserved, etc</p></div></summary>
    <content type="xhtml"><div xmlns="http://www.w3.org/1999/xhtml"><svg style="float:right" xmlns='http://www.w3.org/2000/svg' width="100" height="100" viewBox="0 0 100 100">
  <circle cx='50' cy='50' r='44' fill='#666'></circle>
  <path d='M48,95c-8-1-15-7-18-11s-6-6-2-11s17-12,17-12c-9-2-15-10-15-19v-5c0-1-1-3-4-6c-8-9-4-13-4-17a47,45,0,0,0,28,81' fill='#2A2'></path>
  <path d='M32,33c4-11,25-18,36-1h4c3,0,13,2,21,4a45,51,0,0,0-67-24c0,0-1,4,0,7s4,9,5,12' fill='#C11'></path>
  <path d='M34,75c0,0-4,3-2,6c3,3,12,12,22,14a47,45,0,0,0,34-72c0,0,6,9,6,17c-5-1-13-6-24-5c6,18-9,27-19,26' fill='#FD0'></path>
  <path d='M45,61c-9-2-16-9-15-24c0,0,0-2-2-4a24,23,0,0,0,13,30M72,32a24,23,0,0,0-42-4l2,5c5-12,26-17,36-1M70,36c5,13-3,26-19,26l-5,4a24,23,0,0,0,28-28M28,23c3-1,1-6-2-6zM34,13a3,1-30,1,0,0,1M20,18c-19,26-15,43,3,60c7,6,2,6-1,3c-17-13-24-38-2-63M25,30l-3-1c-3,1-9-2-1-7' fill='#FFF' opacity='.4'></path>
  <radialGradient id='gcb' cx='50' cy='39' r='20' gradientUnits='userSpaceOnUse'>
    <stop offset='0' stop-color='#BDF'></stop>
    <stop offset='.5' stop-color='#18C'></stop>
    <stop offset='1' stop-color='#333'></stop>
  </radialGradient>
  <circle cx='50' cy='42' r='18' fill='url(#gcb) #37C'></circle>
  <path d='M74,88c0,0,1-3-3-7c14-8,19-22,20-33c0,0,5-1,6,7M62,93c0,0-3-2-5-7c0,0,6-1,10-3c0,0,4,3,3,8' stroke='#EC0' fill='none'></path>
</svg>
<p><a href="http://blog.chromium.org/2009/12/google-chrome-for-linux-goes-beta.html">Dan Kegel and Evan Martin</a>: Google Chrome for Linux is finally ready for beta</p>
<pre class="code">sudo apt-get update
sudo apt-get remove google-chrome-unstable
sudo apt-get install google-chrome-beta</pre>
<p>Looks like a clean substitution: icon in my gnome panel still works, history is preserved, etc.  I’ve not noted any significant issues with the “unstable” version, but perhaps this beta will be updated <em>slightly</em> less frequently the unstable version.</p>
<p>Biggest miss for me is <a href="http://ubuntuforums.org/showthread.php?t=1287380">PDF viewing</a>.  Like others, <code>about:plugins</code> shows <em>Adobe Acrobat</em>, but actually visiting a PDF gives me a black window.</p>
<p>Admittedly petty issues: with Firefox: I’m accustomed to typing in part of an address in the Navigation Toolbar, hitting <em>tab</em> and then enter.  With Chrome it is <em>down</em> then enter.  Finally, entering a <code>/</code> starts a search on the page with Firefox, with Chrome it does nothing.</p></div></content>
    <updated>2009-12-08T16:58:28-05:00</updated>
  </entry>

  <entry>
    <id>tag:intertwingly.net,2004:3092</id>
    <link href="/blog/2009/12/07/Desarrollo-Web-con-Rails"/>
    <link rel="replies" href="3092.atom" thr:count="0"/>
    <title>Desarrollo Web con Rails</title>
    <content type="xhtml"><div xmlns="http://www.w3.org/1999/xhtml"><svg style="float:right" xmlns='http://www.w3.org/2000/svg' width="99" height="101" viewBox="0 0 99 101">
  <path d='M2,95h11l40-85l-8-9z' fill='#6292c7'></path>
  <path d='M89,95h11l-37-71l-6,10z' fill='#6292c7'></path>
  <path d='M51,96l16-34h-34z' fill='#f6a923'></path>
</svg>
<p>I got a copy of <a href="http://www.anayamultimedia.es/cgigeneral/ficha.pl?id_sello_editorial_web=23&amp;codigo_comercial=2315582">this book</a> in the mail.</p>
<p>An excerpt that made me chuckle: <em><a href="http://translate.google.com/#es|en|Es%20un%20alivio%2C%20as%C3%AD%20que%20recordando%20un%20poco%20del%20espa%C3%B1ol%20que%20aprendimos%20en%20el%20colegio%2C%20vamos%20a%20comenzar%20a%20trabajar">Es un alivio, así que recordando un poco del español que aprendimos en el colegio, vamos a comenzar a trabajar</a>.</em></p>
<p>The context is a chapter on Internationalización. <a href="http://intertwingly.net/blog/2008/09/02/Translation-is-Hard-Lets-Go-Shopping">Further background</a>.</p></div></content>
    <updated>2009-12-07T10:35:50-05:00</updated>
  </entry>

  <entry>
    <id>tag:intertwingly.net,2004:3091</id>
    <link href="/blog/2009/11/29/Telex-Digraph-Mappings"/>
    <link rel="replies" href="3091.atom" thr:count="17" thr:updated="2010-01-27T15:15:09-05:00"/>
    <title>Telex Digraph Mappings</title>
    <summary type="xhtml"><div xmlns="http://www.w3.org/1999/xhtml"><p>Aurélio, Küng, Stärk, Uña, Łuksza, these are but a few of the names of contributors to the ASF.  Names which contain non-ASCII characters.  Characters that <a href="http://subversion.tigris.org/issues/show_bug.cgi?id=2464">subversion</a> doesn’t deal with consistently between Mac and other platforms.</p>
<p>The Wikipedia entry for <a href="http://en.wikipedia.org/wiki/Umlaut_(diacritic)#Borrowing_of_German_umlaut_notation">Umlaut</a> indicates that there is set of rules for mapping such characters to ASCII for Telex devices, but I have been unable to locate these rules.  Anybody have a pointer?</p></div></summary>
    <content type="xhtml"><div xmlns="http://www.w3.org/1999/xhtml"><svg style="float:right" xmlns="http://www.w3.org/2000/svg" width="115" height="87" viewBox="0 0 115 87">
  <path d="M0,1v83h26c-10,0-22-11-22-21v-62zM22,1v53c0,16,22,16,22,0v-53zM41,84c10,0,22-11,22-21v-22l27,43zM60,1h30v20h19v-20h5v84h-5v-56h-19v18z" fill="#C60025"></path>
</svg>
<p>Aurélio, Küng, Stärk, Uña, Łuksza, these are but a few of the names of contributors to the ASF.  Names which contain non-ASCII characters.  Characters that <a href="http://subversion.tigris.org/issues/show_bug.cgi?id=2464">subversion</a> doesn’t deal with consistently between Mac and other platforms.</p>
<p>I can map these (as well as a few others) names (albeit in a lossy manner) to subversion-safe file names using the following JavaScript:</p>
<pre class="code">name=name.replace(/\u00e4|a\u0308/g,'ae');
name=name.replace(/\u00e5|a\u030a/g,'aa');
name=name.replace(/\u00e7|c\u0327/g,'c');
name=name.replace(/\u00e9|e\u0301/g,'e');
name=name.replace(/\u00f1|n\u0303/g,'ny');
name=name.replace(/\u00f6|o\u0308/g,'oe');
name=name.replace(/\u00f8/g,'o');
name=name.replace(/\u00fc|u\u0308/g,'ue');
name=name.replace(/\u0141/g,'L');</pre>
<p>But at this point, it occurs to me that such a set of mappings must have been done before.  The Wikipedia entry for <a href="http://en.wikipedia.org/wiki/Umlaut_(diacritic)#Borrowing_of_German_umlaut_notation">Umlaut</a> indicates that there is such a set of rules for Telex devices, but I have been unable to locate these rules.  Anybody have a pointer?</p></div></content>
    <updated>2009-11-29T12:25:41-05:00</updated>
  </entry>

  <entry>
    <id>tag:intertwingly.net,2004:3090</id>
    <link href="/blog/2009/11/27/cgi-spa"/>
    <link rel="replies" href="3090.atom" thr:count="0"/>
    <title>cgi-spa</title>
    <summary type="xhtml"><div xmlns="http://www.w3.org/1999/xhtml"><p>I’ve refactored a number of helpers I’ve used to simplify development of Server Side <a href="http://en.wikipedia.org/wiki/Single_page_application">Single Page Applications</a> into <a href="http://github.com/rubys/cgi-spa">cgi-spa</a>, also available as a <a href="http://gemcutter.org/gems/cgi-spa">gem</a> or even as a <a href="http://github.com/rubys/cgi-spa/raw/master/lib/cgi-spa.rb">standalone file</a>.</p>
<p>There are times when the scalability I care about is the ability to scale <b>down</b>.  For many applications, one request per second is more than enough, as the application has few users, often only one.  These applications tend to contain all of the same types of bits that “real” applications do: markup, stylesheets, server side logic, and client side logic; just generally not enough to spread across multiple files.</p></div></summary>
    <content type="xhtml"><div xmlns="http://www.w3.org/1999/xhtml"><svg style="float:right" xmlns='http://www.w3.org/2000/svg' width="100" height="100" viewBox="0 0 100 100">
<path d='M20,100l74-5l6-75zM61,35l37-2l-29-24z' fill='#b11'></path>
<path d='M21,100l74-5l-47-4zM98,33c4-12,5-29-14-33l-15,9l29,24z' fill='#811'></path>
<path d='M7,67l14,33l11-38z' fill='#d44'></path>
<path d='M29,61l42,13l-10-42zM56,0h28l-16,10zM1,51l-1,29l7-13z' fill='#c22'></path>
<path d='M32,61l39,13c-14,13-30,24-50,26z' fill='#a00'></path>
<path d='M61,35l10,39l17-23zM32,61l16,30c9-5,16-11,23-17l-39-13z' fill='#900'></path>
<path d='M61,35l27,17l10-20l-37,3z' fill='#800'></path>
<path d='M71,74l23,21l-6-44zM0,80c1,19,15,20,21,20l-14-33l-7,13zM7,67l-2,26c4,6,9,7,15,6c-4-11-13-32-13-32zM69,9l30,4c-1-7-6-11-15-13l-15,9z' fill='#911'></path>
<path d='M1,51l6,16l25-5l29-27l8-26l-13-9l-22,8c-6,7-20,19-20,19c-1,1-9,16-13,24z' fill='#ebb'></path>
<path d='M21,21c15-14,34-23,42-16c7,8-1,26-16,40c-14,15-33,24-41,17c-7-7,1-26,15-41z' fill='#b11'></path>
</svg>
<p>I’ve refactored a number of helpers I’ve used to simplify development of Server Side <a href="http://en.wikipedia.org/wiki/Single_page_application">Single Page Applications</a> into <a href="http://github.com/rubys/cgi-spa">cgi-spa</a>, also available as a <a href="http://gemcutter.org/gems/cgi-spa">gem</a> or even as a <a href="http://github.com/rubys/cgi-spa/raw/master/lib/cgi-spa.rb">standalone file</a>.</p>
<p>There are times when the scalability I care about is the ability to scale <b>down</b>.  For many applications, one request per second is more than enough, as the application has few users, often only one.  These applications tend to contain all of the same types of bits that “real” applications do: markup, stylesheets, server side logic, and client side logic; just generally not enough to spread across multiple files.</p>
<p>Given the size of these applications, coupling isn’t an issue; putting all of the parts in a single file is a plus.</p>
<p>Two examples:</p>
<ul>
<li><a href="http://intertwingly.net/stories/2009/11/27/smbpasswd.rb">smbpasswd.rb</a> enables my wife to change her SMB password.  It is a sipmle form, with some simple validation, and ultimately runs a single command, captures stdout and stderr and returns the results.</li>
<li><a href="http://intertwingly.net/stories/2009/11/27/awdwr.rb">awdwr.rb</a> provides a ‘dashboard’ summary of tests I have run, a process status of any tests that may currently be running, and allows new tests to be submitted for execution as a background process.  AJAX techniques are used to update the page every five seconds.</li>
</ul>

<p>With minimal change, all of the pieces can be split out and used in a full blown Rails application.  <a href="http://intertwingly.net/stories/2009/11/27/_chart.builder">_chart.builder</a> is a Rails partial that started out life as a part of a standalone application.</p></div></content>
    <updated>2009-11-27T15:57:24-05:00</updated>
  </entry>

</feed>

